{% extends 'patient/base_dashboard.html' %}
{% block title %}My Profile | HealthBook{% endblock %}
{% block nav_profile %}active{% endblock %}

{% block extra_css %}
<style>
    .form-grid { display:grid;grid-template-columns:1fr 1fr;gap:1rem 1.5rem; }
    .form-group.full-width { grid-column:1/-1; }
</style>
{% endblock %}

{% block content %}
<h1 class="page-header">My Profile</h1>

<div class="card">
    <h3>Personal Information</h3>
    <form method="POST" action="{% url 'patient_update_profile' %}">
        {% csrf_token %}
        <div class="form-grid">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" name="full_name" value="{{ patient.full_name }}" class="form-input">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" value="{{ patient.email }}" class="form-input">
            </div>
            <div class="form-group">
                <label>Phone</label>
                <input type="text" name="phone_number" value="{{ patient.phone_number }}" class="form-input">
            </div>
            <div class="form-group">
                <label>Date of Birth</label>
                <input type="date" name="date_of_birth" value="{{ patient.date_of_birth|date:'Y-m-d' }}" class="form-input">
            </div>
            <div class="form-group full-width">
                <label>Address</label>
                <textarea name="address" class="form-textarea">{{ patient.address }}</textarea>
            </div>
        </div>

        <button class="btn-submit btn-submit-green">Save Profile</button>
    </form>
</div>

<div class="card">
    <h3>Change Password</h3>
    <form method="POST" action="{% url 'patient_change_password' %}">
        {% csrf_token %}

        <div class="form-grid">
            <div class="form-group">
                <label>Current Password</label>
                <input type="password" name="current_password" class="form-input">
            </div>
            <div class="form-group">
                <label>New Password</label>
                <input type="password" name="new_password" class="form-input">
            </div>
        </div>

        <button class="btn-submit">Update Password</button>
    </form>
</div>
{% endblock %}
