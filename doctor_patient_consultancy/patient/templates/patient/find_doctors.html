{% extends 'patient/base_dashboard.html' %}
{% block title %}Find Doctors | HealthBook{% endblock %}
{% block content %}

<div style="background-color:var(--card-dark);border-radius:12px;padding:2rem;margin-bottom:2rem;">
    <h2 style="color:var(--primary-blue);margin-bottom:1.5rem;">Find a Doctor ü©∫</h2>

    <form method="GET" 
          style="display:grid;grid-template-columns:2fr 1fr 0.5fr;gap:1rem;align-items:center;">
        
        <!-- üîç Search by name -->
        <input type="text" name="doctor_name" value="{{ search_query }}" 
               placeholder="Search by doctor name..."
               style="padding:12px;border-radius:8px;border:1px solid var(--border-color);
                      background-color:var(--bg-dark);color:var(--text-light);font-size:1rem;">
        
        <!-- ü©∫ Filter by specialization -->
        <select name="specialty"
                style="padding:12px;border-radius:8px;border:1px solid var(--border-color);
                       background-color:var(--bg-dark);color:var(--text-light);font-size:1rem;">
            <option value="">All Specialties</option>
            {% for s in specialties %}
                <option value="{{ s }}" {% if specialty_filter == s %}selected{% endif %}>
                    {{ s }}
                </option>
            {% endfor %}
        </select>
        
        <!-- ‚öôÔ∏è Filter button -->
        <button type="submit"
                style="background-color:var(--primary-blue);color:white;border:none;
                       padding:12px;border-radius:8px;font-weight:bold;cursor:pointer;">
            Filter
        </button>
    </form>
</div>

<div style="background-color:var(--card-dark);border-radius:12px;padding:2rem;">
    <h3 style="color:var(--primary-blue);margin-bottom:1rem;">Available Doctors</h3>

    {% if doctors %}
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;">
            {% for d in doctors %}
            <div style="background-color:var(--bg-dark);padding:1.5rem;border-radius:10px;
                        border:1px solid var(--border-color);transition:all 0.2s;">
                <div style="display:flex;align-items:center;margin-bottom:1rem;">
                    <div style="width:60px;height:60px;border-radius:50%;
                                background-color:var(--primary-blue);color:white;
                                display:flex;align-items:center;justify-content:center;
                                font-size:1.5rem;font-weight:bold;margin-right:1rem;">
                        {{ d.fname|first }}{{ d.lname|first }}
                    </div>
                    <div>
                        <h4 style="margin:0;font-size:1.2rem;">Dr. {{ d.fname }} {{ d.lname }}</h4>
                        <p style="margin:0.25rem 0;color:var(--text-muted);">
                            {{ d.specialization }}
                        </p>
                        <p style="margin:0;color:var(--text-muted);font-size:0.9rem;">
                            {{ d.qualification }} | {{ d.years_of_experience }} yrs exp.
                        </p>
                    </div>
                </div>
                
                <div style="display:flex;justify-content:space-between;align-items:center;margin-top:1rem;">
                    <a href="{% url 'book_apponiment' d.id %}"
                       style="background-color:var(--success);color:white;text-decoration:none;
                              padding:10px 18px;border-radius:8px;font-weight:600;">
                        Book Appointment
                    </a>
                    <span style="color:var(--text-muted);font-size:0.9rem;">
                        ‚≠ê {{ d.rating|default:"4.5" }}
                    </span>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align:center;color:var(--text-muted);padding:2rem;">
            No doctors found for your search.
        </p>
    {% endif %}
</div>

{% endblock %}

